---
title: "iOS SDK (Swift)"
description: "Integrate payment processing with physical terminals using the Terminal Gateway SDK for iOS (Swift)"
---

# Terminal Gateway SDK for iOS (Swift)

The Terminal Gateway SDK for iOS enables you to integrate secure payment processing directly into your iOS applications. Connect to physical payment terminals and process transactions seamlessly using our comprehensive Swift SDK.

<Info>
This SDK works alongside the Terminal API to provide a complete in-person payment solution. You'll use the Terminal API to create payment sessions and the Terminal Gateway SDK to interact with physical payment devices.
</Info>

## Version information

<AccordionGroup>
  <Accordion title="v0.5.0 — 30-Oct-2025">
    What's new:
    - Introduced command ID handling for settlement operations
    - Enhanced retry logic with configurable attempt counts
    - Improved error handling and logging throughout the gateway service
  </Accordion>
  <Accordion title="v0.4.1 — 7-Oct-2025">
    Bug fixes and improvements:
    - Fix data mapping for terminal responses
    - [BRI] Enhanced status verification after transaction timeout for improved reliability
  </Accordion>

  <Accordion title="v0.4.0 — 13-May-2025">
    XenTerminal is the companion SDK to In-Person Payment Sessions API. This version provides core functionality for connecting to payment terminals and processing transactions.
  </Accordion>
</AccordionGroup>

<Note>
The SDK follows semantic versioning. Breaking changes will bump the major version number.
</Note>

## Download

Download the Terminal Gateway iOS SDK:

<CardGroup cols={1}>
<Card title="iOS SDK (v0.5.0)" icon="apple" href="https://xnd-secops.s3.ap-southeast-1.amazonaws.com/inpersonpayments/TerminalGateway+iOS-0.5.0.zip">
  Download the complete iOS SDK package including TerminalGateway.xcframework and documentation

  ```
  SHA256: 43195599b780c22226ec88168037252f0589b12ade9659017d29912383fa4671
  ```
</Card>
</CardGroup>

## Installation

Install the Terminal Gateway SDK by adding it as a framework in Xcode:

<Steps>
<Step title="Add Sentry dependency">
  Add the Sentry pod to your Podfile:
  
  ```ruby Podfile
  target 'YourApp' do
    pod 'Sentry', :git => 'https://github.com/getsentry/sentry-cocoa.git', :tag => '8.45.0'
  end
  ```
  
  <Check>
  Run `pod install` to install the dependency.
  </Check>
</Step>

<Step title="Extract framework">
  Extract the TerminalGateway.xcframework zip file in your project directory.
  
  <Frame>
  <img src="/images/ios/extract-zip.png" alt="Extracting TerminalGateway.xcframework zip file in Finder" />
  </Frame>
</Step>

<Step title="Add framework to project">
  In Xcode, select your target and navigate to the "General" tab.
  
  Find "Frameworks, Libraries, and Embedded Content" and click the "+" button.
  
  <Frame>
  <img src="/images/ios/select-target.png" alt="Selecting target and navigating to General tab in Xcode" />
  </Frame>
  
  <Frame>
  <img src="/images/ios/find-frameworks.png" alt="Finding Frameworks, Libraries, and Embedded Content section in Xcode" />
  </Frame>
</Step>

<Step title="Import framework">
  Click "Add Other..." and select "Add Files..."
  
  Search for TerminalGateway.xcframework, select it, and click "Open".
  
  <Frame>
  <img src="/images/ios/import-framework-add-files.png" alt="Importing TerminalGateway.xcframework in Xcode using Add Files dialog" />
  </Frame>
</Step>

<Step title="Configure build settings">
  Go to "Build Settings" and make the following changes:
  
  - Search for "ENABLE_USER_SCRIPT_SANDBOXING" and set it to "NO"
  - Search for "Other Linker Flags" and add "-lsqlite3"
  
  <Frame>
  <img src="/images/ios/enable-sandbox-no.png" alt="Setting ENABLE_USER_SCRIPT_SANDBOXING to NO in Xcode Build Settings" />
  </Frame>
  
  <Frame>
  <img src="/images/ios/add-lsqlite3.png" alt="Adding -lsqlite3 to Other Linker Flags in Xcode Build Settings" />
  </Frame>
</Step>
</Steps>

## Getting Started

Before starting, you'll need an In-Person Payment CLIENT_KEY from the Xendit In-Person Payment team. You will also need the terminal <a href="#finding-terminal-information">IP address</a>.

<Warning>
Terminal Gateway requires physical payment devices to function. Contact the Xendit team to obtain compatible terminal devices and configuration details.
</Warning>

### Step 1: Initialize SDK

Call the `XenTerminal.initialize()` method within the Application class of your app:

```swift AppDelegate.swift
TerminalApp.shared.initialize(
   clientKey: TEST_CLIENT_KEY,
   mode: TerminalMode.integration
)

TerminalGateway.shared.addProvider(provider: TerminalBRI.shared)
// For GHL
// TerminalGateway.shared.addProvider(provider: TerminalGHL.shared)
```

The SDK supports two modes:

<Tabs>
<Tab title="Integration Mode">
  Use `TerminalMode.integration` for development and testing with physical terminals. Transactions are sent to Test Mode on the Xendit Dashboard.
</Tab>

<Tab title="Live Mode">
  Use `TerminalMode.live` for production builds. Data is pushed to your Live Xendit Dashboard and requires a LIVE_CLIENT_KEY.
</Tab>
</Tabs>

### Step 2: Register Terminal Device

Register multiple devices by calling the `registerDevices` method:

```swift
TerminalGateway.shared.registerDevices(devices: [ 
  TerminalDevice(id: Terminal_ID_1, ipAddress: Terminal_IP_1),    
  TerminalDevice(id: Terminal_ID_2, ipAddress: Terminal_IP_2), 
  TerminalDevice(id: Terminal_ID_3, ipAddress: Terminal_IP_3) 
  // Add more TerminalDevice instances as needed 
])
```

<Tip>
For detailed instructions on finding <a href="#finding-terminal-information">Terminal ID</a> and <a href="#finding-terminal-information">IP address</a> for different terminal providers, see our [Finding Terminal Information guide](#finding-terminal-information).
</Tip>

## Optional Methods

### Set Operation Timeout

Configure the maximum allowed time for operations to complete before the service cancels and retries the transaction:

```swift
TerminalGateway.shared.setOperationTimeout(minutes: 5) // default value is 5 minutes
```

### Restart Terminal Connection

Manage and restart terminal service connections:

<Tabs>
<Tab title="Restart All Connections">
  Call the method without parameters to restart all connections and tasks:
  
  ```swift
  // This restarts all connections
  TerminalGateway.shared.restart(terminalID: nil)
  ```
</Tab>

<Tab title="Restart Single Connection">
  Provide the <a href="#finding-terminal-information">terminal ID</a> to restart a specific terminal connection:
  
  ```swift
  // This restarts the connection to a specific Terminal
  TerminalGateway.shared.restart(terminalID: TERMINAL_ID)
  ```
</Tab>
</Tabs>

### Observing Connection State

Monitor Terminal connection status using the `observeEDCConnection` method:

```swift
TerminalGateway.shared
  .observeConnection(device: terminalDevice) { state in     
   // Handle connection state changes
}
```

The SDK handles the following connection states:

| Code | Description |
|------|-------------|
| `connected` | Device connected to Terminal |
| `disconnected` | Device disconnected to Terminal |
| `unknown` | When no connection has been established yet |
| `connecting` | Device requesting connection to Terminal |
| `connectingFailed` | Device unable to connect with Terminal |
| `unsupported` | Connection not supported |

### Observing Error State

Monitor Terminal error states using the `observeError` method:

```swift
TerminalGateway.shared.observeError(onResult: { device, error in
    // Handle error state events
})
```

## Error Handling

### Error Data Structure

All errors returned by the Terminal Gateway SDK follow this structure:

```swift
struct TerminalError {
    let code: ErrorCode
    let message: String
}
```

### Error Codes Reference

| Error Code | HTTP Status | Description |
|------------|-------------|-------------|
| INVALID_CREDENTIAL | 401 | Provided credentials are invalid or expired |
| INVALID_REQUEST | 400 | Request format or parameters are invalid |
| INTERNAL_SERVER_ERROR | 500 | Server-side error occurred during processing |
| UNKNOWN_ERROR | 0 | Unexpected error that doesn't fit other categories |
| KEY_INVALID | -1 | API key is invalid or not authorized |
| SEND_FAILED | -2 | Failed to send data to the terminal device |
| NOT_CONNECTED | -3 | No active connection to any terminal device |
| FAILED_TO_CONNECT | -4 | Unable to establish connection to terminal |
| UNSUPPORTED | -5 | Operation or platform not supported |
| TERMINAL_BUSY | -6 | Terminal is processing another transaction |
| ENCRYPTION_FAILED | -7 | Encryption key invalid or encryption process failed |
| AUTHENTICATION_FAILED | -21 | Terminal authentication failed - check <a href="#finding-terminal-information">TID</a> and credentials |

### Error Handling Best Practices

Implement comprehensive error handling for robust payment processing:

```swift
func handleTerminalError(_ error: TerminalError?) {
    switch error?.code {
    case .authenticationFailed:
        // Verify API key and <a href="#finding-terminal-information">terminal ID</a>
        print("Authentication failed: \(error?.message ?? "")")
        // Show user-friendly message and retry with correct credentials
        
    case .terminalBusy:
        // Terminal is processing another transaction
        print("Terminal busy: \(error?.message ?? "")")
        // Wait and retry after a delay
        retryAfterDelay(5.0) // 5 seconds
        
    case .failedToConnect, .notConnected:
        // Network connectivity issues
        print("Connection failed: \(error?.message ?? "")")
        // Check network connection and terminal <a href="#finding-terminal-information">IP address</a>
        checkNetworkConnectivity()
        
    case .keyInvalid, .invalidCredential:
        // Credential issues
        print("Invalid credentials: \(error?.message ?? "")")
        // Rotate or refresh API credentials
        refreshCredentials()
        
    case .encryptionFailed:
        // Encryption key issues
        print("Encryption failed: \(error?.message ?? "")")
        // Re-initialize SDK with correct encryption keys
        reinitializeSDK()
        
    default:
        // Log and escalate unknown errors
        print("Unknown error: \(error?.message ?? "")")
        // Report to monitoring system
        reportError(error)
    }
}
```

<Tip>
Always implement retry logic for transient errors like `TERMINAL_BUSY` and `FAILED_TO_CONNECT`. Use exponential backoff to avoid overwhelming the terminal.
</Tip>

## Troubleshooting

### Common Issues and Solutions

<AccordionGroup>
<Accordion title="Unresponsive EDC Machine">
  **Problem**: The EDC (Electronic Data Capture) machine becomes unresponsive or stops processing transactions.

  **Solution**: 
  1. Restart the EDC machine by holding the power button and selecting "Restart"
  2. Wait for the device to fully boot up and reconnect
  3. Verify the terminal is back online using the connection monitoring features

  <Warning>
  Always ensure the EDC is properly restarted before attempting new transactions to avoid data corruption.
  </Warning>
</Accordion>

<Accordion title="Kiosk Mode Configuration">
  **Problem**: Unexpected behaviors or unauthorized access to terminal functions.

  **Solution**:
  1. Ensure all transactions are initiated only through the SDK
  2. Contact the Xendit EDC team to enable POS-only mode for your <a href="#finding-terminal-information">Terminal IDs</a>
  3. Configure terminal settings to disable manual transaction entry

  <Tip>
  POS-only mode prevents manual transaction entry and ensures all operations go through your application.
  </Tip>
</Accordion>

<Accordion title="No Response After Payment Completion">
  **Problem**: EDC fails to send transaction results to the SDK after payment completion.

  **Solution**:
  1. Query the Payment Session using the Terminal API to retrieve the latest status
  2. Check network connectivity between the EDC and your application
  3. Verify the callback URL configuration in your payment session
  4. Implement retry logic for failed status updates

  ```swift
  // Example: Query payment session status
  let paymentSession = terminalApi.getPaymentSession(sessionId)
  switch paymentSession.status {
  case .completed:
      // Process successful payment
  case .failed:
      // Handle failed payment
  case .pending:
      // Payment still in progress
  }
  ```
</Accordion>

<Accordion title="Connection Issues">
  **Problem**: Unable to establish or maintain connection with terminal devices.

  **Solutions**:
  - **Check network connectivity**: Ensure both devices are on the same network
  - **Verify IP addresses**: Confirm terminal <a href="#finding-terminal-information">IP addresses</a> are correct and accessible
  - **Firewall settings**: Check if firewall is blocking the connection ports
  - **Terminal status**: Ensure the terminal is powered on and in ready state
  - **SDK initialization**: Verify client key and terminal configuration

  <Note>
  Use the connection monitoring features to diagnose specific connection issues.
  </Note>
</Accordion>
</AccordionGroup>

import FindingTerminalInformation from '/snippets/finding-terminal-information.mdx';

<FindingTerminalInformation />