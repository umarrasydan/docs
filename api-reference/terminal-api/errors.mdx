---
title: "Errors & Simulations"
description: "Error handling and testing simulations for the Terminal API"
---

# Errors & Simulations

Error handling is an essential part of integrating with the Xendit's Payment Terminal API. This section covers error codes, error handling best practices, and testing simulations.

## Error Data Structure

An error occurs when the HTTP status is not 200.

<ResponseField name="error_code" type="string">
  Error code
</ResponseField>

<ResponseField name="message" type="string">
  Error message
</ResponseField>

## Error Codes

<Table>
  <TableHead>
    <TableRow>
      <TableHeader>Code</TableHeader>
      <TableHeader>Description</TableHeader>
    </TableRow>
  </TableHead>
  <TableBody>
    <TableRow>
      <TableCell><Code>INVALID_REQUEST</Code></TableCell>
      <TableCell>Missing or invalid parameters</TableCell>
    </TableRow>
    <TableRow>
      <TableCell><Code>DUPLICATED_REQUEST</Code></TableCell>
      <TableCell>Duplicated reference id</TableCell>
    </TableRow>
    <TableRow>
      <TableCell><Code>UNAUTHORIZED</Code></TableCell>
      <TableCell>Unauthorized, invalid API Key</TableCell>
    </TableRow>
    <TableRow>
      <TableCell><Code>CURRENCY_NOT_SUPPORTED</Code></TableCell>
      <TableCell>Currency is not supported for your account</TableCell>
    </TableRow>
    <TableRow>
      <TableCell><Code>TERMINAL_NOT_FOUND</Code></TableCell>
      <TableCell>The terminal id is not configured for your account</TableCell>
    </TableRow>
    <TableRow>
      <TableCell><Code>COMMAND_NOT_SUPPORTED</Code></TableCell>
      <TableCell>The command currently not supported for this terminal</TableCell>
    </TableRow>
  </TableBody>
</Table>

## Error Handling Best Practices

<CardGroup cols={2}>
  <Card title="Parse Error Response" icon="code">
    Always parse the error response and use the error code or message to determine the cause of the failure
  </Card>
  <Card title="Log Errors" icon="file-text">
    Log error responses for debugging and monitoring purposes
  </Card>
  <Card title="Retry Logic" icon="refresh">
    Implement appropriate retry logic for transient errors
  </Card>
  <Card title="User Feedback" icon="user">
    Provide meaningful error messages to end users when appropriate
  </Card>
</CardGroup>

## Example Error Response

```json
{
  "error_code": "INVALID_REQUEST",
  "message": "Missing required parameter: terminal_id"
}
```

## Simulations

**Perfect for merchants without physical terminals yet!** 

You can start integrating immediately using our simulation capabilities. No need to wait for terminal delivery - test payment flows, error handling, and webhook integrations using special test amounts and terminal IDs.

<Info>
**Getting Started Without Hardware**: Use any `terminal_id` value (like `SIM001`) and special test amounts to simulate different payment scenarios. This is ideal for merchants waiting on terminal delivery or those who want to build and test their integration before hardware arrives.
</Info>

For testing purposes in test mode, the following special amounts and terminal IDs can be used to trigger specific situations or errors. Otherwise the API will always succeed.

<Warning>
These simulations only work in test mode. In production mode, all transactions will be processed normally.
</Warning>

### Payment Session Simulations

<Table>
  <TableHead>
    <TableRow>
      <TableHeader>Case</TableHeader>
      <TableHeader>Amount (6 digits)</TableHeader>
      <TableHeader>Terminal ID</TableHeader>
      <TableHeader>Description</TableHeader>
      <TableHeader>Expected Behavior</TableHeader>
    </TableRow>
  </TableHead>
  <TableBody>
    <TableRow>
      <TableCell>Failed to Pay</TableCell>
      <TableCell><Code>400508</Code></TableCell>
      <TableCell>All</TableCell>
      <TableCell>Emulates: Payment declined by terminal</TableCell>
      <TableCell>Session created, transaction failed</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>Channel Unavailable</TableCell>
      <TableCell><Code>400509</Code></TableCell>
      <TableCell>All</TableCell>
      <TableCell>Emulates: Channel is not available by any reason</TableCell>
      <TableCell>Session failed to create</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>Canceled</TableCell>
      <TableCell><Code>400711</Code></TableCell>
      <TableCell>All</TableCell>
      <TableCell>Emulates: User canceled on terminal</TableCell>
      <TableCell>Session created, then canceled</TableCell>
    </TableRow>
    <TableRow>
      <TableCell>Invalid TID</TableCell>
      <TableCell>Any</TableCell>
      <TableCell><Code>4040404</Code></TableCell>
      <TableCell>Invalid terminal ID</TableCell>
      <TableCell>Session creation fails</TableCell>
    </TableRow>
  </TableBody>
</Table>

### Testing with Real Terminals in Test Mode

**For merchants who want to test with physical payment terminals while still in test mode**

Testing with real terminals in test mode allows you to validate the complete payment flow using actual hardware while keeping transactions in a safe testing environment. This is different from simulation testing, which doesn't require physical hardware.

<Warning>
**Important**: Real terminals must be registered with Xendit's system to process test transactions. Unregistered terminals will automatically fall back to simulation mode.
</Warning>

<Steps>
  <Step title="Prerequisites Check">
    Before starting, ensure you have:
    - Physical terminal device connected and powered on
    - Terminal Gateway app/SDK installed and configured
    - Terminal showing "Connected" or "Ready" status
    - Test mode enabled in your Terminal Gateway
    - Valid Terminal API key for test environment
    
    <Check>
    Your terminal device is physically connected and showing ready status in the Terminal Gateway.
    </Check>
  </Step>
  
  <Step title="Terminal Registration Request">
    Contact Xendit support to register your terminal for test mode:
    
    **Contact Information:**
    - Email: [inpersonpayments@xendit.co](mailto:inpersonpayments@xendit.co)
    - Subject: "Terminal Registration for Test Mode"
    
    **Required Information:**
    - Terminal ID (TID) - found on device or in Terminal Gateway
    - Xendit Business ID - from your Xendit dashboard
    - Environment: "Test Mode"
    - Use case: Brief description of your testing requirements
    
    <Tip>
    Include your terminal model (BRI, GHL, etc.) and any specific testing scenarios you plan to run.
    </Tip>
  </Step>
  
  <Step title="Wait for Registration Confirmation">
    Xendit support will confirm when your terminal is registered and ready for test transactions.
    
    **Expected Timeline:** 1-2 business days
    
    <Check>
    You receive confirmation that your terminal is registered for test mode.
    </Check>
  </Step>
  
  <Step title="Verify Test Mode Setup">
    Test your terminal registration with a small test transaction:
    
    ```bash Test Registration
    curl -X POST 'https://terminal-dev.xendit.co/v1/terminal/sessions' \
      -H 'Authorization: Basic <your_test_api_key_base64>' \
      -H 'Content-Type: application/json' \
      -H 'Idempotency-key: test-registration-123' \
      -d '{
        "session_type": "PAY",
        "mode": "TERMINAL",
        "currency": "IDR",
        "amount": 1000,
        "country": "ID",
        "channel_properties": {
          "terminal_id": "YOUR_REGISTERED_TERMINAL_ID"
        }
      }'
    ```
    
    <Check>
    You receive a successful response and the terminal prompts for payment interaction.
    </Check>
  </Step>
  
  <Step title="Test Complete Payment Flow">
    Validate the end-to-end flow with your registered terminal:
    - Create payment session via API
    - Physical terminal displays payment prompt
    - Complete payment using test card or method
    - Receive webhook callbacks for payment events
    - Verify payment status via API
    
    <Check>
    Complete payment flow works with real card interactions and proper webhook delivery.
    </Check>
  </Step>
</Steps>

#### Key Differences: Real Terminal Testing vs Simulation

<Tabs>
<Tab title="Real Terminal Testing">
  **Uses physical hardware with test transactions**
  
  - **✓** Real card reader interactions
  - **✓** Real money movement
  - **✓** Actual terminal display prompts
  - **✓** Physical button presses and card taps
  - **✓** Network connectivity testing
  - **✓** Complete hardware validation
  - **!** Requires terminal registration
  - **!** Dependent on physical hardware
</Tab>

<Tab title="Simulation Testing">
  **API-only testing without hardware**
  
  - **✓** Immediate testing without hardware
  - **✓** Comprehensive error scenario testing
  - **✓** Webhook integration validation
  - **✓** No registration required
  - **✓** Faster development cycles
  - **×** No physical hardware validation
  - **×** Limited to API-level testing
</Tab>
</Tabs>

#### Troubleshooting Real Terminal Testing

<AccordionGroup>
  <Accordion title="Terminal Not Responding">
    **Symptoms**: API calls succeed but terminal doesn't show payment prompts
    
    <Steps>
      <Step title="Check Terminal Status">
        Verify terminal shows "Connected" in Terminal Gateway
      </Step>
      <Step title="Verify Registration">
        Confirm terminal ID is registered for test mode
      </Step>
      <Step title="Test Network Connection">
        Ensure terminal has stable network connectivity
      </Step>
      <Step title="Restart Terminal Gateway">
        Restart the Terminal Gateway app/SDK connection
      </Step>
    </Steps>
  </Accordion>
  
  <Accordion title="TERMINAL_NOT_FOUND Error">
    **Symptoms**: API returns error code `TERMINAL_NOT_FOUND`
    
    <Steps>
      <Step title="Verify Terminal ID">
        Double-check the terminal ID matches exactly
      </Step>
      <Step title="Check Registration Status">
        Contact support to verify registration is complete
      </Step>
      <Step title="Confirm Environment">
        Ensure using test API key with test terminal registration
      </Step>
    </Steps>
  </Accordion>
  
  <Accordion title="Transactions Fall Back to Simulation">
    **Symptoms**: API works but no physical terminal interaction
    
    <Steps>
      <Step title="Confirm Registration">
        Verify terminal is registered (unregistered terminals auto-simulate)
      </Step>
      <Step title="Check Terminal Gateway Mode">
        Ensure Terminal Gateway is in test mode, not simulation mode
      </Step>
      <Step title="Validate Terminal Connection">
        Confirm terminal shows active connection status
      </Step>
    </Steps>
  </Accordion>
</AccordionGroup>

<Note>
**Best Practice**: Start with simulation testing for initial integration, then move to real terminal testing for final validation before production.
</Note>

## Testing

<Tabs>
<Tab title="Simulation Testing (No Terminal Required)">
  **Start integration immediately without waiting for hardware delivery**
  
  <Steps>
  <Step title="Use any terminal ID">
    For simulation testing, any `terminal_id` value works. The system automatically simulates payment responses.
    
    ```json
    {
      "terminal_id": "SIM001"  // Any value works for simulation
    }
    ```
  </Step>
  
  <Step title="Test comprehensive scenarios">
    Use special amounts to test different payment outcomes:
    
    <CardGroup cols={2}>
      <Card title="Success Flow" icon="circle-check">
        **Amount**: Any normal amount (e.g., `10000`)  
        **Result**: Payment succeeds automatically
      </Card>
      <Card title="Payment Declined" icon="circle-xmark">
        **Amount**: `400508`  
        **Result**: Session created, transaction fails
      </Card>
      <Card title="Channel Unavailable" icon="wifi">
        **Amount**: `400509`  
        **Result**: Session creation fails
      </Card>
      <Card title="User Cancellation" icon="ban">
        **Amount**: `400711`  
        **Result**: Session created, then canceled
      </Card>
    </CardGroup>
  </Step>
  
  <Step title="Test invalid terminal scenarios">
    Use special terminal IDs to test error handling:
    
    ```json
    {
      "terminal_id": "4040404"  // Triggers TERMINAL_NOT_FOUND error
    }
    ```
  </Step>
  
  <Step title="Verify webhook integration">
    All webhook callbacks work exactly the same as with physical terminals:
    - `terminal_session.completed`
    - `terminal_session.canceled` 
    - `terminal_payment.succeeded`
    - `terminal_payment.failed`
  </Step>
  </Steps>
  
  <Check>
  **Benefits**: Start building immediately, test error handling, validate webhook flows, and prepare for production - all without physical hardware.
  </Check>
</Tab>

<Tab title="Physical Terminal Testing">
  **For merchants with connected terminal devices**
  
  <Steps>
  <Step title="Register terminals">
    Register your physical terminals with the Terminal Gateway and ensure they show "Connected" status.
  </Step>
  
  <Step title="Test with real hardware">
    Use your actual terminal IDs and test with real card interactions.
  </Step>
  
  <Step title="Validate complete flow">
    Test the full payment experience from session creation to card processing.
  </Step>
  </Steps>
</Tab>
</Tabs>

## Error Recovery Strategies

<AccordionGroup>
  <Accordion title="INVALID_REQUEST">
    <Steps>
      <Step title="Check Parameters">
        Verify all required parameters are present and correctly formatted
      </Step>
      <Step title="Validate Data Types">
        Ensure data types match the API specification
      </Step>
      <Step title="Retry with Corrected Data">
        Fix the request and retry
      </Step>
    </Steps>
  </Accordion>
  
  <Accordion title="DUPLICATED_REQUEST">
    <Steps>
      <Step title="Check Idempotency Key">
        Ensure the idempotency key is unique across all environments
      </Step>
      <Step title="Generate New Key">
        Create a new unique idempotency key
      </Step>
      <Step title="Retry Request">
        Retry with the new idempotency key
      </Step>
    </Steps>
  </Accordion>
  
  <Accordion title="UNAUTHORIZED">
    <Steps>
      <Step title="Verify API Key">
        Check that the API key is correct and active
      </Step>
      <Step title="Check Encoding">
        Ensure the API key is properly base64 encoded with the colon
      </Step>
      <Step title="Contact Support">
        If the issue persists, contact Xendit support
      </Step>
    </Steps>
  </Accordion>
  
  <Accordion title="TERMINAL_NOT_FOUND">
    <Steps>
      <Step title="Verify Terminal ID">
        Check that the terminal ID is correct
      </Step>
      <Step title="Check Registration">
        Ensure the terminal is registered for your account
      </Step>
      <Step title="Contact Support">
        If needed, contact support to register the terminal
      </Step>
    </Steps>
  </Accordion>
</AccordionGroup>
